{"version":3,"sources":["js/timer.js"],"names":["CountdownTimer","constructor","selector","targetDate","intervalId","init","prevTime","getTimeComponents","Date","creatEl","setInterval","currentTime","deltaTime","time","key","valueEl","document","querySelector","valueOldEl","newValue","currentValue","parent","parentNode","classList","remove","textContent","offsetWidth","add","clearInterval","days","Math","floor","hours","minutes","seconds","pad","value","String","padStart","timer1","timeEl","push","toUpperCase","slice","innerHTML","join","timer"],"mappings":";AAAA,MAAMA,EACFC,aAAY,SAAEC,EAAF,WAAYC,IACjBC,KAAAA,WAAa,KACbF,KAAAA,SAAWA,EACXC,KAAAA,WAAaA,EACbE,KAAAA,OAGPA,OACMC,IAAAA,EAAW,KAAKC,kBAAkB,KAAKJ,WAAa,IAAIK,MACvDC,KAAAA,QAAQH,GACRF,KAAAA,WAAaM,YAAY,KACtBC,MAAAA,EAAc,IAAIH,KAClBI,EAAY,KAAKT,WAAaQ,EAC9BE,EAAO,KAAKN,kBAAkBK,GAC/B,IAAA,MAAME,KAAOD,EAAM,CAChBE,MAAAA,EAAUC,SAASC,8BAA8BH,OACjDI,EAAaF,SAASC,8BAA8BH,UACpDK,EAAWN,EAAKC,GAChBM,EAAed,EAASQ,GACxBO,EAASN,EAAQO,WACnBH,GAAAA,IAAaC,EAAc,CAC7BC,EAAOE,UAAUC,OAAO,QACxBT,EAAQU,YAAcN,EACtBD,EAAWO,YAAcL,EACbC,EAAOK,YACnBL,EAAOE,UAAUI,IAAI,SAGzBrB,EAAW,IAAKO,GACZD,EAAY,KACdgB,cAAc,KAAKxB,aAEpB,KAGLG,kBAAkBM,GAOT,MAAA,CAAEgB,KANIC,KAAKC,MAAMlB,EAAQ,OAMjBmB,MAJDF,KAAKC,MAAOlB,EAAQ,MAAyB,MAIrCoB,QAHNH,KAAKC,MAAOlB,EAAQ,KAAoB,KAGzBqB,QAFfJ,KAAKC,MAAOlB,EAAQ,IAAc,MAKpDsB,IAAIC,GACKC,OAAAA,OAAOD,GAAOE,SAAS,EAAG,KAGnC7B,QAAQI,EAAO,IACP0B,MAAAA,EAASvB,SAASC,cAAc,KAAKf,UACrCsC,EAAS,GACV,IAAA,MAAM1B,KAAOD,EAChB2B,EAAOC,yGAE+B3B,MAAQD,EAAKC,6DACVA,SAAWD,EAAKC,8DAEjCA,EAAI,GAAG4B,cAAgB5B,EAAI6B,MAAM,6BAEzDJ,EAAOK,UAAYJ,EAAOK,KAAK,KAKrC,MAAMC,EAAQ,IAAI9C,EAAe,CAC/BE,SAAU,WACVC,WAAY,IAAIK,KAAK","file":"timer.aa3d1ce3.js","sourceRoot":"../src","sourcesContent":["class CountdownTimer {\n    constructor({ selector, targetDate }) {\n      this.intervalId = null;\n      this.selector = selector;\n      this.targetDate = targetDate;\n      this.init();\n    }\n  \n    init() {\n      let prevTime = this.getTimeComponents(this.targetDate - new Date());\n      this.creatEl(prevTime);\n      this.intervalId = setInterval(() => {\n        const currentTime = new Date();\n        const deltaTime = this.targetDate - currentTime;\n        const time = this.getTimeComponents(deltaTime);\n        for (const key in time) {\n          const valueEl = document.querySelector(`[data-value=\"${key}\"]`);\n          const valueOldEl = document.querySelector(`[data-value=\"${key}Old\"]`);\n          const newValue = time[key];\n          const currentValue = prevTime[key];\n          const parent = valueEl.parentNode;\n          if (newValue !== currentValue) {\n            parent.classList.remove('anim');\n            valueEl.textContent = newValue;\n            valueOldEl.textContent = currentValue;\n            const foo = parent.offsetWidth; // reflow hack\n            parent.classList.add('anim');\n          }\n        }\n        prevTime = { ...time };\n        if (deltaTime < 1000) {\n          clearInterval(this.intervalId);\n        }\n      }, 1000);\n    }\n  \n    getTimeComponents(time) {\n      const days = Math.floor(time / (1000 * 60 * 60 * 24));\n\n      const hours = Math.floor((time % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n      const minutes = Math.floor((time % (1000 * 60 * 60)) / (1000 * 60));\n      const seconds = Math.floor((time % (1000 * 60)) / 1000);\n  \n      return { days, hours, minutes, seconds };\n    }\n  \n    pad(value) {\n      return String(value).padStart(2, '0');\n    }\n  \n    creatEl(time = {}) {\n      const timer1 = document.querySelector(this.selector);\n      const timeEl = [];\n      for (const key in time) {\n        timeEl.push(`<div class=\"field\">\n          <div class=\"values\">\n            <span class=\"value\" data-value=\"${key}\">${time[key]}</span>\n            <span class=\"valueOld\" data-value=\"${key}Old\">${time[key]}</span>\n          </div>\n          <span class=\"label\">${key[0].toUpperCase() + key.slice(1)}</span>\n        </div>`);\n        timer1.innerHTML = timeEl.join('');\n      }\n    }\n  }\n  \n  const timer = new CountdownTimer({\n    selector: '#timer-1',\n    targetDate: new Date('Apr 21, 2022'),\n  \n  });"]}